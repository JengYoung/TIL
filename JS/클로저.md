# **í´ë¡œì €**

> ğŸ’¡ **ì‚ë¹…! ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ì•„ì£¼~ ë‚œí•´í•œ ê°œë… ì¤‘ í•˜ë‚˜!**

ìë°”ìŠ¤í¬ë¦½íŠ¸ ê³ ìœ ì˜ ê°œë…ì€ ì•„ë‹ˆë‹¤.

**í•¨ìˆ˜ë¥¼ ì¼ê¸‰ ê°ì²´ë¡œ ì·¨ê¸‰í•˜ëŠ” í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë° ì–¸ì–´ì—ì„œ ì‚¬ìš©ë˜ëŠ” ì¤‘ìš”í•œ íŠ¹ì„±**

- ë ‰ì‹œì»¬ í™˜ê²½ì„ ë¨¼ì € ì´í•´í•˜ì—¬ì•¼ í•¨.

```
const x = 1;

function outerFunc() {
    const x = 10;

    function innerFunc() {
        console.log(x); // 10
    }
    innerFunc();
}

outerFunc();
```

10ì´ ì¶œë ¥ë  ìˆ˜ ìˆëŠ” ì´ìœ ëŠ” ë ‰ì‹œì»¬ ìŠ¤ì½”í”„ ë•Œë¬¸ì¸ë°,
ì´ëŠ” í•¨ìˆ˜ë¥¼ ì–´ë””ì„œ ì •ì˜í–ˆëŠ”ì§€ì— ë”°ë¼ ìƒìœ„ ìŠ¤ì½”í”„ë¥¼ ê²°ì •í•˜ëŠ” `JS` êµ¬ì¡° ë•Œë¬¸.

> ì¦‰ ìœ ë™ì ìœ¼ë¡œ ë³€í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ì–´ë–¤ ìŠ¤ì½”í”„ êµ¬ì¡°ë¥¼ ê²°ì •í•˜ëŠ” ê²ƒì€ ì •ì ì¸ ì²´ê³„ì—ì„œ ì§„í–‰ëœë‹¤ëŠ” ê²ƒ!  
> í•¨ìˆ˜ê°€ ì •ì˜ëœ í™˜ê²½(ìœ„ì¹˜)ì— ì˜í•´ ìƒìœ„ ìŠ¤ì½”í”„ ì°¸ì¡°ë¥¼ ê²°ì •í•œë‹¤.

ì´ëŸ¬í•œ ìƒìœ„ ìŠ¤ì½”í”„ëŠ” `[[Environment]]` ë‚´ë¶€ ìŠ¬ë¡¯ì— ì˜í•´ ì°¸ì¡°ëœ ìœ„ì¹˜ë¥¼ ì €ì¥í•˜ëŠ” ê²ƒì´ë‹¤!

### **ê·¸ëŸ°ë° ë‹¤ìŒ ìƒí™©ì„ ë³´ì**

```
const x = 1;

function outer() {
    const x  = 10;
    const inner = function() { console.log(x); }
    return inner;
}

const innerFunc = outer();
innerFunc(); // 10
```

í•¨ìˆ˜ë¥¼ ë°˜í™˜í•˜ê³  ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ ìŠ¤íƒì—ì„œ ì œê±° ë˜ë©´, ì§€ì—­ ë³€ìˆ˜ xëŠ” ìœ íš¨í•˜ì§€ ì•Šë‹¤. ê·¸ëŸ°ë° `innerFunc`ë¥¼ í˜¸ì¶œí•œ ê°’ì€ 10ì´ë‹¤!

ì´ê²ƒì´ í´ë¡œì €ì˜ íŠ¹ì„±ì´ë‹¤.

> **í´ë¡œì €ë€ ì™¸ë¶€ í•¨ìˆ˜ë³´ë‹¤ ì¤‘ì²© í•¨ìˆ˜ê°€ ë” ì˜¤ë˜ ìœ ì§€ë˜ëŠ” ê²½ìš°, ì¤‘ì²© í•¨ìˆ˜ëŠ” ìƒëª…ì£¼ê¸°ë¥¼ ì¢…ë£Œí•œ ì™¸ë¶€ í•¨ìˆ˜ì˜ ë³€ìˆ˜ë¥¼ ì°¸ì¡°í•˜ëŠ”ë° ì´ëŸ¬í•œ ì¤‘ì²© í•¨ìˆ˜ë¥¼ ì¼ì»«ëŠ”ë‹¤.**

---

### **í´ë¡œì €ì˜ ë™ì‘ ê³¼ì •**

ì—¬íƒœê¹Œì§€ ê¸°ì–µí•˜ëŠ” ê²ƒì€, ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ëë‚˜ë©´, ìŠ¤íƒì—ì„œ ì œê±°ëœë‹¤ëŠ” ê±°ë‹¤.

ë§ë‹¤! ì‹¤ì œë¡œ ìŠ¤íƒì—ì„œ ì œê±°ëœë‹¤.
ê·¸ëŸ°ë° í´ë¡œì € ë™ì‘ì˜ í•µì‹¬ í¬ì¸íŠ¸ëŠ”

> **ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ ìŠ¤íƒì—ì„œëŠ” ì œê±°ë˜ì§€ë§Œ, ë ‰ì‹œì»¬ í™˜ê²½ ìì²´ê°€ ì†Œë©¸í•˜ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤!**

### **ì™œ ì†Œë©¸í•˜ì§€ ì•ŠëŠ”ê°€?**

ìƒê°í•´ë³´ì.

í•´ë‹¹ ë°˜í™˜ëœ í•¨ìˆ˜ê°€ ë‹¤ì‹œ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ì— ì˜¬ë ¤ì§ˆ ë•Œ, `outer`í•¨ìˆ˜ëŠ” `inner`í•¨ìˆ˜ì˜ `[[environment]]` ë‚´ë¶€ ìŠ¬ë¡¯ì— ì°¸ì¡°ë  ê²ƒì´ë‹¤.

ë˜í•œ ì „ì—­ ì»¨í…ìŠ¤íŠ¸ì—ì„œ `inner`í•¨ìˆ˜ëŠ” `innerFunc`ì—ì„œ ì°¸ì¡°ë˜ê³  ìˆë‹¤.

ì–´ë–¤ ë³€ìˆ˜ì— ì˜í•´ ì°¸ì¡°ë  ë•Œì—ëŠ” ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ì˜ ëŒ€ìƒì— í¬í•¨ë˜ì§€ ì•ŠëŠ”ë‹¤.

ë”°ë¼ì„œ ë©”ëª¨ë¦¬ì— ë‚¨ê²¨ì§€ê³ , `inner`ì€ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ìœ ì§€ë˜ëŠ” ë™ì•ˆ `[[environment]]` ë‚´ë¶€ ìŠ¬ë¡¯ìœ¼ë¡œë¶€í„° ìƒìœ„ ìŠ¤ì½”í”„ë¥¼ ê³„ì†í•´ì„œ ì°¸ì¡°í•  ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤!

> ğŸ’¡ **ê²°êµ­ì—ëŠ” ëˆ„êµ°ê°€ê°€ ì°¸ì¡°í•˜ê³  ìˆê¸° ë•Œë¬¸ì— ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ ëŒ€ìƒì´ ì•„ë‹ˆë©°, ë‚´ë¶€ ìŠ¬ë¡¯ì— ì˜í•´ ì´ì–´ì¡Œê¸°ì— í´ë¡œì €ê°€ ê°€ëŠ¥í•˜ë‹¤**

### **ê·¸ëŸ¬ë©´ ëª¨ë“  í•¨ìˆ˜ëŠ” í´ë¡œì €ì¸ê°€?**

ì´ë¡ ì ìœ¼ë¡œëŠ” ê·¸ë ‡ë‹¤. í•˜ì§€ë§Œ ì‚¬ì‹¤ì€ ê·¸ë ‡ì§€ ì•Šë‹¤.

```
function foo() {
    const x = 1;
    const y =  2;
    function bar() {
        const z = 3;

        debugger;
        // ìƒìœ„ ìŠ¤ì½”í”„ì˜ ì‹ë³„ìë¥¼ ì°¸ì¡° X
        console.log(z);
    }
    return bar;
}

const bar = foo();
bar();
```

ìœ„ ì˜ˆì œëŠ” í´ë¡œì €ê°€ ì•„ë‹ˆë‹¤. ê·¸ ì´ìœ ëŠ”

1. ìƒìœ„ ìŠ¤ì½”í”„ì˜ ì–´ë–¤ ë³€ìˆ˜ë¥¼ ì°¸ì¡°í•˜ì§€ ì•Šê³  ìˆë‹¤.
2. ë”°ë¼ì„œ ë§Œì•½ `foo()`ê°€ `bar`ì„ ë°˜í™˜í•˜ë©´, ì´ë•Œì—ëŠ” `foo()`ì˜ ë ‰ì‹œì»¬ í™˜ê²½ì„ ê³„ì† ê°–ê³  ìˆëŠ” ê²ƒì€ ë©”ëª¨ë¦¬ ë‚­ë¹„ë¼ê³  íŒë‹¨í•œë‹¤.
3. ì™¸ë¶€ í•¨ìˆ˜ë³´ë‹¤ ì¤‘ì²© í•¨ìˆ˜ì˜ ìƒëª… ì£¼ê¸°ê°€ ì§§ê¸° ë•Œë¬¸ì— ì´ëŠ” í´ë¡œì €ì˜ ë³¸ì§ˆì— ë¶€í•©í•˜ì§€ ì•ŠëŠ”ë‹¤.
4. ë”°ë¼ì„œ `bar()`ì€ ìì‹ ì˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ì—ì„œ ì•Œì•„ì„œ ì‹¤í–‰í•˜ë„ë¡ í•˜ê³ , `foo()`ëŠ” ì¢…ë£Œí•œë‹¤.

### **í´ë¡œì €ì˜ ì •ì˜ë¥¼ ì •ë¦¬ (ë§ì— ìš´ìœ¨ì´ ëŠê»´ì§„ë‹¤?!)**

í´ë¡œì €ëŠ”

> **1. ì¤‘ì²© í•¨ìˆ˜ê°€ ìƒìœ„ ìŠ¤ì½”í”„ì˜ ì‹ë³„ìë¥¼ ì°¸ì¡°í•˜ê³  ìˆê³ ,**  
> **2. ì¤‘ì²© í•¨ìˆ˜ê°€ ì™¸ë¶€ í•¨ìˆ˜ë³´ë‹¤ ë” ì˜¤ë˜ ìœ ì§€ë˜ëŠ” ê²½ìš°ì— í•œì •í•œë‹¤.**  
> **3. ì¦‰, ììœ ë³€ìˆ˜(í´ë¡œì €ì— ì˜í•´ ì°¸ì¡°ë˜ëŠ” ìƒìœ„ ìŠ¤ì½”í”„ ë³€ìˆ˜)ì— ë¬¶ì¸ í•¨ìˆ˜ì¸ ê²ƒì´ë‹¤!**

---

## **í´ë¡œì €ì˜ í™œìš©**

- ìƒíƒœë¥¼ ì•ˆì „í•˜ê²Œ ë³€ê²½, ìœ ì§€í•˜ê¸° ìœ„í•´ ì‚¬ìš©
- ìƒíƒœë¥¼ ì€ë‹‰, íŠ¹ì • í•¨ìˆ˜ì—ê²Œë§Œ ìƒíƒœ ë³€ê²½ í—ˆìš©.

```
const increase = function() {
    let num = 0;

    return ++ num;
};

console.log(increase()); // 1
console.log(increase()); // 1
console.log(increase()); // 1
```

ë‹¤ìŒì€ í•­ìƒ 1ë¡œë§Œ ì¶œë ¥ë  ìˆ˜ë°–ì— ì—†ë‹¤.
í•¨ìˆ˜ê°€ í˜¸ì¶œë  ë•Œë§ˆë‹¤ ì§€ì—­ë³€ìˆ˜ numì´ ìƒˆë¡­ê²Œ ì„ ì–¸ë˜ê³  0ìœ¼ë¡œ ì´ˆê¸°í™”ë˜ê¸° ë•Œë¬¸ì´ë‹¤.

ê·¸ëŸ°ë°, ë‹¤ìŒì„ ë³´ì. ìƒë‹¹íˆ ì–´ì¸í•œ ì¼ì´ ì¼ì–´ë‚œë‹¤ ğŸ‘

```
const increase = (function() {
    // ì¹´ìš´íŠ¸ ìƒíƒœ ë³€ìˆ˜
    let num = 0;

    // í´ë¡œì €
    return function () {
        // ì¹´ìš´íŠ¸ ìƒíƒœë¥¼ 1ë§Œí¼ ì¦ê°€
        return ++num;
    }
}());

console.log(increase());
console.log(increase());
console.log(increase());
```

ì! ë‹¤ìŒì„ ë³´ì. ì´ë¥¼ ìˆœì„œëŒ€ë¡œ ë¶„ì„í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.

1. ì¦‰ì‹œ ì‹¤í–‰ í•¨ìˆ˜ê°€ ë°˜í™˜í•œ í•¨ìˆ˜ê°€ `increase`ë³€ìˆ˜ì— í• ë‹¹ëœë‹¤.
2. í•´ë‹¹ í• ë‹¹ëœ í•¨ìˆ˜ëŠ” ì¦‰ì‹œ ì‹¤í–‰ í•¨ìˆ˜ì´ë©°, ì—¬ê¸°ì„œ ë°˜í™˜ëœ í•¨ìˆ˜ê°€ ë˜ increaseë³€ìˆ˜ì— í• ë‹¹ëœë‹¤. (ë°˜í™˜ê°’ì´ë‹ˆê¹Œ!)
3. ê·¸ëŸ°ë° ì´ ë°˜í™˜í•œ í´ë¡œì €ëŠ” ìì‹ ì˜ ìƒìœ„ ìŠ¤ì½”í”„ì¸ ì¦‰ì‹œ ì‹¤í–‰ í•¨ìˆ˜ì˜ ë ‰ì‹œì»¬ í™˜ê²½ì„ ì°¸ì¡°í•˜ê³  ìˆë‹¤.
4. ì°¸ì¡°í•˜ê³  ìˆê¸° ë•Œë¬¸ì— ìƒìœ„ ìŠ¤ì½”í”„ì¸ ì¦‰ì‹œ ì‹¤í–‰ í•¨ìˆ˜ëŠ” ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ì˜ ëŒ€ìƒì— í¬í•¨ë˜ì§€ ì•Šì•„ ë ‰ì‹œì»¬ í™˜ê²½ì´ ë‚¨ì•„ ìˆëŠ” ìƒíƒœ!
5. ê·¸ ìƒíƒœì—ì„œ `num`ì€ ììœ ë³€ìˆ˜ì´ë¯€ë¡œ ê³„ì†í•´ì„œ í•´ë‹¹ ë ‰ì‹œì»¬ í™˜ê²½ì„ ì°¸ì¡° ì¤‘ì¸ í´ë¡œì €ë¥¼ í†µí•´ ë³€ê²½ì´ ê°€ëŠ¥í•˜ë‹¤.
6. ê·¸ë˜ì„œ í•œ ë²ˆí•˜ê³  ëë‚  ì¤„ ì•Œì•˜ëŠ”ë°... 3ë²ˆì´ë‚˜ ìˆë„¤?
7. 3ë²ˆ ëë‚  ë•Œê¹Œì§€ `num`ì´ ìˆëŠ” ë ‰ì‹œì»¬ í™˜ê²½ì€ ì¢…ë£Œê°€ ë˜ì§€ ì•ŠëŠ”ë‹¤. ë”°ë¼ì„œ 1 2 3 ì´ ì¶œë ¥ëœë‹¤!

**ê²°ê³¼ì ìœ¼ë¡œ ì´ëŸ¬í•œ ê³¼ì •ì„ í†µí•´ ì–´ë–¤ ë³€ìˆ˜ ë“±ì˜ ìƒíƒœë¥¼ ì•ˆì „í•˜ê²Œ ë³´í˜¸í•˜ê³ , ì€ë‹‰ì„ í•´ì¤„ ìˆ˜ ìˆê²Œ ë˜ëŠ” ê²ƒì´ë‹¤.**

---

### **í´ë¡œì €ì˜ í™œìš© - ìƒì„±ì í•¨ìˆ˜**

ë‹¤ìŒê³¼ ê°™ì´ í•˜ë©´, `num` í”„ë¡œí¼í‹°ë¥¼ ì€ë‹‰í•  ìˆ˜ ìˆë‹¤!

```
const Counter = (function () {
    // 1. ì¹´ìš´íŠ¸ ìƒíƒœ ë³€ìˆ˜
    let num = 0;

    function Counter() {
        //this.num = 0; // ì´ë•Œì˜ property ëŠ” publicí•˜ë‹¤! ë”°ë¼ì„œ ìƒìœ„ ìŠ¤ì½”í”„ì˜ ì§€ì—­ë³€ìˆ˜ë¡œ ë„£ëŠ”ë‹¤.
    }

    Counter.prototype.increase = function () {
        return ++num;
    }

    Counter.prototype.decrease = function () {
        return num > 0 ? --num : 0;
    }

    return Counter;
}())

const counter = new Counter();

console.log(counter.increase());
console.log(counter.increase());

console.log(counter.decrease());
console.log(counter.decrease());
console.log(counter.decrease());
```

### **í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ì—ì„œì˜ í´ë¡œì € í™œìš©**

ë‹¤ìŒê³¼ ê°™ì´ ì²˜ë¦¬í•˜ë©´, ë…ë¦½ëœ ë ‰ì‹œì»¬ í™˜ê²½ì„ ê°–ê²Œ ë˜ë¯€ë¡œ ììœ ë³€ìˆ˜ `counter`ì´ ë…ë¦½ì ìœ¼ë¡œ ì—°ì‚°ëœë‹¤.

```
// í•¨ìˆ˜ë¥¼ ì¸ìë¡œ ë°›ê³  í•¨ìˆ˜ë¥¼ ë°˜í™˜í•˜ëŠ” ê³ ì°¨í•¨ìˆ˜

function makeCounter(predicate) {
    let counter = 0;
    return function() {
        // ì½œë°±ì´ ì°¸ì¡°ëœ ìƒìœ„ ìŠ¤ì½”í”„ì˜ counter ë³€ê²½
        counter = predicate(counter);
        return counter;
    }
}

function increase(n) {
    return ++n;
}

function decrease(n) {
    return --n;
}

const increaser = makeCounter(increase);
console.log(increaser());
console.log(increaser());

// ë…ë¦½ëœ ë ‰ì‹œì»¬ í™˜ê²½ì„ ê°€ì§€ë¯€ë¡œ ë”°ë¡œ ì²˜ë¦¬ë¨.
const decreaser = makeCounter(decrease);
console.log(decreaser());
console.log(decreaser());
console.log(decreaser());
```

ë”°ë¼ì„œ ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ”, `makeCounter`ì„ ë‘ ë²ˆ í˜¸ì¶œí•´ì„œëŠ” ì•ˆ ëœë‹¤. ë”°ë¼ì„œ ë ‰ì‹œì»¬ í™˜ê²½ì„ ê³µìœ í•˜ëŠ” í´ë¡œì €ë¥¼ ë§Œë“ ë‹¤.

```
const counter = (function () {
    let counter = 0;
    return function (predicate) {
        counter = predicate(counter);
        return counter;
    }
}())

function increase(n) {
    return ++n;
}

function decrease(n) {
    return --n;
}

console.log(counter(increase));
console.log(counter(increase));
console.log(counter(decrease));
console.log(counter(decrease));
console.log(counter(decrease));

```
