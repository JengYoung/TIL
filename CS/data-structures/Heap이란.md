# **Heap이란**

- 완전 이진트리 구조
- **최댓값, 최솟값을 찾아내는 연산을 빠르게 하기 위해 고안**된 자료구조.
- 가설: **A가 B의 부모노드**이면, A의 키값과 B의 키값에는 **대소관게가 성립**한다.
- 이에 따라, 힙은 크게 **최소힙, 최대힙**으로 구현된다.
- 힙의 종류에 따라 **자식 노드의 최대 개수는 다르나, 대개 2개**인 이진 힙이다.
- 결국 가장 크거나 작은 값이 뿌리에 오기 때문에, **우선순위 큐를 구현할 수 있다.**
- 해당 **노드의 인덱스를 알면 깊이와 부모, 자식의 위치를 계산**할 수 있다.
- 트리이지만 **배열**로 표현하기 좋은 구조다. (이진 힙)
- **힙 정렬, 허프만 코드, 우선순위 큐** 등에서 주로 사용한다.

## **시간복잡도**

### **최댓값, 최솟값 찾기**

결국 최댓값, 최솟값은 가장 밑에 있거나, 루트노드에 있다.  
따라서 루트노드에서 가져왔을 때의 경우 `O(1)`에 찾을 수 있는 것이다.

### **데이터 삽입 및 삭제**

`O(log N)`이 소요된다.
과정은 다음과 같다.

- **데이터 삽입**

  1. 가장 끝의 자리에 노드를 삽입한다.
  2. 그 노드와 부모 노드를 서로 비교한다.
  3. 규칙에 맞으면 그대로 두고, 그렇지 않으면 부모와 교환한다.
  4. 규칙에 맞을 때까지 3번 과정을 반복한다.

- **데이터 삭제**

  > 최댓값 혹은 최솟값이 저장된 루트 노드만 제거할 수 있다.

  1. 루트 노드를 제거한다.
  2. 루트 자리에 가장 마지막 노드를 삽입한다.[3]
  3. 올라간 노드와 그의 자식 노드(들)와 비교한다.
  4. 조건에 만족하면 그대로 두고, 그렇지 않으면 자식과 교환한다.

  - 최대 힙  
     **4-가)** 부모보다 더 큰 자식이 없으면 교환하지 않고 끝낸다.  
     **4-나)** 부모보다 더 큰 자식이 하나만 있으면 그 자식하고 교환하면 된다.  
     **4-다)** 부모보다 더 큰 자식이 둘 있으면 자식들 중 큰 값과 교환한다.
  - 최소 힙  
     **4-가)** 부모보다 더 작은 자식이 없으면 교환하지 않고 끝낸다.  
     **4-나)** 부모보다 더 작은 자식이 하나만 있으면 그 자식하고 교환하면 된다.  
     **4-다)** 부모보다 더 작은 자식이 둘 있으면 자식들 중 작은 값과 교환한다.

  5. 조건을 만족할 때까지 4의 과정을 반복한다.
