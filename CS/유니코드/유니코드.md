# **문자 시스템 기본개념 3가지**

## **CCS(Coded Character Set)**

문자들을 코드 포인트에 대응시켜 만든 코드화된 문자들의 집합

`Code Point` 문자열의 식별자

`KSC5601` `ISO10646` `US-ASCII`

## **CES(Character Encoding Scheme)**

- CCS를 8비트 집합에 대응시키는 것. (8비트가 문자의 기본단위이기 때문)
- 최소가 8비트 1개인 집합이 될 수가 있고, 여러 개의 8비트가 집합에 포함될 수 있음.

`CCS` 와 `CES`는 그러므로 1:1 대응이 된다.

이 과정을 흔히 인코딩이라 함.

문자를 시스템이 인식할 수 있는 값으로 변환

인코딩된 값을 다시 문자로 변환

`UTF-8` `euc-kr`

## **TES**

- 인코딩한 문자가 특정 프로토콜을 타고 전송되도록 변환하는 것
- 통신 프로토콜에 제약이 있을 수 있기 때문
  - URL에서 공백은 사용할 수 없으므로 변환하는 것이 대표적인 예.
- `URL Encoding` `BASE64 Encoding`

# **끝판왕, 유니코드**

이 세 가지 개념의 끝판왕이 유니코드.

- 전 세계의 문자를 컴퓨터에 다룰 수 있도록 만든 표준 시스템.
- 이전에도 각 나라는 자신들의 문자를 잘 표현했었음.
- 그러나 각각 다른 인코딩 방식으로 인해 호환성 및 확장성에 문제가 발생.

  (같은 문자에서도 호환이 안되는 경우가 빈번.)

- 전 세계 문자를 컴퓨터에서 호환가능하도록 만든 것이 바로 유니코드.
- 대부분 문자를 포함, 이모티콘도 포함.

## **유니코드 - CCS**

범위가 상당히 넓다. 총 1114112개의 문자가 포함될 수 있음.
앞 1바이트 단위로 역할이 달라짐.

> 유니코드는 2바이트라 들었는데...

이는 잘못된 오해. 실제로는 4바이트 영역까지 사용.

흔히 쓰이는 문자를 모은 영역인 BMP를 벗어난 곳  
→ 자주 사용되지 않는 문자들이 담겨짐 (이모티콘도 BMP 영역 벗어남)

2바이트보다 큰 문자를 표현하기 위해 Surrogate Pair 방법 이용.  
Surrogate 보조문자와 BMP 외부영역에 있는 문자를 합쳐 1글자를 표현할 수 있음.
Surrogate 문자는 BMP 영역에 있음.

## **유니코드 -CES**

코드 포인트가 어떤 단위로 조합되어 인코딩되는 지 정의한 것.

보통 웹 문서의 크기를 줄이기 위해 `UTF-8`로 인코딩.

`UTF`들은 바이트 순서도 다르고 `BOM`이 허용되는지 여부도 다름

### **Big-Endian과 Little-Endian**

컴퓨터 메모리에 저장된 바이트의 순서를 말함.

- `Big-Endian` : 큰 쪽 → 작은 쪽으로 저장 (사람이 읽고 쓰는 것과 같음
- `Little-Endian` : 작은 쪽 → 큰 쪽으로 저장 (하위 바이트만 계산할 때 별도 계산할 필요가 없어 컴퓨터가 더 사용하기 편함)

### **BOM (Byte Order Mark)**

**인코딩을 바꾸다가 흔히들 깨지는 경우**가 발생하는 것이 이것 때문!

문서 제일 앞에 바이트 순서를 알 수 있도록 표시하는 역할을 담당

`FE FF`: Big-Endian

`FF FE`: Little-Endian

## **자바스크립트는 유니코드를 지원**

```bash
const poo = "💩";
console.log(poo.charCodeAt(0).toString(16));
console.log(poo.charCodeAt(1).toString(16));
// 이모티콘은 4바이트므로 코드포인트가 2개씩으로 이루어짐
// 첫 번째 코드포인트가 Surrogate 문자가 됨.

const unicodePoo = "\uD83D\uDCA9";
console.log(unicodePoo);

console.log(poo === unicodePoo);

// 이모티콘은 4바이트므로 2칸 차지.
console.log(poo.length);

// 알파벳이든 한글이든 2바이트로 읽힘.
console.log("한글".length);
```
