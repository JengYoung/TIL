# GSLB 구성방식

## 도메인 자체를 GSLB로 사용하는 방식

해당 도메인에 속하는 모든 레코드 설정을 GSLB 장비에서 관리한다. 즉, 도메인 레코드에 대해 GSLB가 모두 설정하는 것이다.  
도메인 구입 시에는 도메인에 대한 권한을 갖는 네임 서버를 지정하고, 이 네임 서버가 도메인을 관리하도록 위임한다.

도메인 자체를 GSLB로 사용하면, 네임 서버를 GSLB로 지정하고, GSLB에서 모든 레코드를 등록해 처리한다.  
GSLB가 곧 도메인의 네임 서버 역할을 하기 때문이다.

그러나 이러하 방식은 헬스 체크 기능이 불필요한 경우와 더불어, 모든 레코드에 대한 질의가 GSLB를 통해 이루어지므로 부하가 발생한다.

## 도메인 내 특정 레코드만 GSLB 사용
 
GSLB를 사용하려는 레코드에 한하여 GSLB로 처리하도록 설정한다.  
보통 회사 대표 도메인에 속한 레코드 중 GSLB가 불필요한 경우가 ㅁ낳은 경우 사용한다.

### 별칭 사용(CNAME 레코드 사용)

실제 도메인과 다른 별도의 도메인 레코드로 GSLB에 등록한다.  
일반적으로 외부 CDN 사용 시, 혹은 회사 내부에 GSLB을 사용할 도메인이 많은 경우 사용한다.  

#### 동작방식

1. 사용자가 특정 주소를 LDNS에 질의
2. LDNS는 root부터 순차적으로 NS 서버를 찾기 위해 질의
3. 찾지 못한 경우 DNS에 질의
4. DNS는 GSLB에 대한 주소를 응답
5. **LDNS는 해당 GSLB 주소(이때 DNS 도메인과 GSLB 도메인 레코드는 다름)를 질의** 
6. **LDNS는 GSLB에 대해 질의**
7. GSLB는 목표 IP 주소 응답
8. 결과값 최종 응답

### 위임 사용(NS 레코드 사용)

실제 도메인과 동일한 도메인 레코드를 사용하며, 도메인 전체를 위임하는 것이 대표적인 예이다.  
DNS와 같은 도메인으로 GSLB를 운영하면서 계층적으로 GSLB를 이용한 FQDN을 관리할 때 사용된다.

#### 동작방식

1. 사용자가 특정 주소를 LDNS에 질의
2. LDNS는 root부터 순차적으로 NS 서버를 찾기 위해 질의
3. 찾지 못한 경우 DNS에 질의
4. DNS는 GSLB에 대한 주소를 응답
5. **LDNS는 NS 서버인 GSLB(이때 DNS 도메인과 GSLB 도메인 레코드는 같음)에 질의**
6. GSLB는 목표 IP 주소 응답
7. 결과값 최종 응답


