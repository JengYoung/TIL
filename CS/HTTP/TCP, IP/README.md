# TCP/IP

`HTTP`는 애플리케이션 계층 프로토콜이다. (**응용 계층**)
따라서 모든 일에 대해 스스로 책임을 갖고 일하지 않는다.  

예컨대 네트워크 통신의 세부 사항들을 굳이 `HTTP`가 관여하지 않는다는 것이다.

그렇다면 누구에게 위임할까?  
이를 `TCP/IP`와 같은 신뢰성 있는 프로토콜에게 위임한다.

`TCP/IP`는 패킷 교환 네트워크 프로토콜의 집합체이다. `TCP/IP`는 각 네트워크와 하드웨어의 특성을 숨기고, 신뢰성 있는 상호작용을 할 수 있도록 지원한다.

즉 `TCP Connection`이 활성화되는 순간, 이 송수신에는 메시지가 변질되거나, 손상되거나, 순서가 잘못 전달되는 일이 발생하지 않음을 보장한다.

## TCP

HTTP는 자신의 메시지와 데이터를 전송하기 위해 `TCP`를 사용한다.  
이때 `TCP`는 **전송 계층**을 담당하는 프로토콜이다.

이러한 TCP는 

1. 오류가 없는 데이터를 전송한다. 
2. 순서에 맞게 데이터를 전송하도록 보장한다. 
3. 조각나지 않는 데이터 스트림을 통해, 언제 어떤 크기로든 자유롭게 보내도록 한다.

## 접속, IP 주소, 포트번호

클라이언트는 서버에 요청 메시지를 전송할 때, 인터넷 프로토콜 주소와 포트번호를 사용하여 `TCP/IP Connection`을 맺어야 한다. 이는 송수신에 있어 신뢰성을 부여하기 위함이다.

이때, `TCP`는 다음과 같은 정보가 필요하다.

+ 서버에서는 어떤 `IP 주소`를 쓰고 있는지
+ 실행 중인 프로그램의 `포트번호`는 무엇인지.

결국 이는 리소스의 위치와 연관이 되어 있다. 리소스가 어떤 위치에서 존재하는지를 알아야 데이터를 전송할 수 있기 때문이다.

> `http://207.200.83.29:80/index.html`
> `http://www.netscape.com:80/index.html`
> `http://www.netscape.com/index.html`

이때, 모든 주소가 같은 위치를 가리킨다. 왜냐! `DNS`를 통해 `IP` 주소를 알기 쉽게 변환했기 때문이다.

즉 `IP` 주소와 포트번호만 알 수 있다면 `TCP/IP` 프로토콜을 이용하여, 쉽게 통신할 수 있는 것이다. 

## HTTP로 리소스를 사용자에게 보여주는 과정

1. 웹브라우저는 서버의 `URL`에서 호스트명을 추출한다.
2. 웹브라우저는 서버의 호스트 명을 `IP`로 변환한다.
3. 웹브라우저는 `URL`에서 `포트번호`를 추출한다.
4. 웹브라우저는 웹 서버와 `TCP Connection`을 맺는다. 
5. 웹브라우저는 서버에 `HTTP Request`를 날린다.
6. 서버는 웹브라우저에 `HTTP Response`를 보낸다.
7. `TCP Connection`이 닫힌다. 웹브라우저는 문서를 보여준다.
