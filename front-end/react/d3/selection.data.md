# d3.selection.data

`d3.selection.data`는 D3.js에서 가장 중요한 메소드 중 하나다.  
이 메소드는 데이터와 선택된 요소를 바인딩한다.  
데이터를 선택된 요소에 바인딩하면, 데이터의 각 항목에 대해 요소를 생성하거나 업데이트할 수 있다.

`data` 메소드는 다음과 같은 형태로 사용된다:

```javascript
d3.select(node).data(data[, key])
```

- `data`: 데이터 배열입니다.
- `key` (선택 사항): 데이터 항목을 요소에 바인딩할 때 사용할 키 함수. 선택된 요소와 데이터 항목을 인수로 받아서, 해당 요소와 데이터 항목이 동일한 그룹에 속하는지 여부를 판단하는 데 사용.

`data` 메소드는 선택된 요소와 데이터 배열을 바인딩하고, 데이터 배열의 각 항목과 요소를 일대일로 매핑. 이후에는 데이터 배열의 각 항목에 대해 요소를 생성하거나 업데이트한다. 이때, `enter`, `exit`, `update` 메소드를 사용.

- `enter`: 데이터 배열에 새로운 항목이 추가될 때, 해당 항목에 대한 요소를 생성
- `exit`: 데이터 배열에서 제거된 항목에 대한 요소를 제거
- `update`: 데이터 배열의 각 항목에 대해, 해당 항목에 해당하는 요소를 선택하고, 스타일 등을 변경

`data` 메소드는 여러 번 호출될 수 있다. 이 경우, 이전에 바인딩된 데이터를 새로운 데이터로 대체한다. 이를 통해 데이터가 변경될 때마다 요소를 업데이트할 수 있다.

예컨대 다음과 같은 HTML 코드가 있다고 가정하자.

```html
<div id="example"></div>
```

이제 D3.js를 사용하여 데이터를 바인딩하고, 요소를 생성한다.

```javascript
// 데이터 배열
const data = [10, 20, 30, 40, 50];

// 선택된 요소
const div = d3.select('#example'); // 없으니 하나 만들어진다.

// 데이터 바인딩
const selection = div.selectAll('p') // 없으니 하나 만들어진다.
  .data(data); // 해당 요소에 데이터 바인딩

// enter 메소드를 사용하여 새로운 요소 생성
selection.enter() // 새로운 요소 추가되었으니 생성 후
  .append('p') // p를 추가하여
  .text(d => d); // 텍스트를 넣는다.

// update 메소드를 사용하여 스타일 변경
selection.style('color', 'red');
```
