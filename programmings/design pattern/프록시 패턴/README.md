# 프록시 패턴

프록시 패턴은 

+ 문제가 주어지고,  
+ 이 문제에 있어 어떤 객체에 대한 접근이 필요할 때,  

해당 객체 대신 중재자로써 로직을 제어하는 객체로 문제를 해결하는 패턴이다.

## 구성

다른 객체와의 실제 연동을 관장하는 하나의 객체로 구성된다.

## 장점

사용자가 다른 문제를 일으키지 않고, 실체를 더 효율적으로 사용할 수 있도록 해준다.  

## 테스트 시 주의사항 및 팁

프록시 테스트는 그 내부를 표출하는 것이 아니다. 단지 실체와 연동하는 모습을 관찰함으로써 이루어진다.  
핵심은 **스파이** 함수를 요긴하게 사용해야 한다.

프록시 패턴은 테스트가 꽤나 까다롭다. 테스트를 간편하게 하기 위해서는 프록시의 실체 서비스를 프록시 생성 함수의 파라미터로 넘기는 것이 좋다.

실체의 은닉화가 절대적으로 필요할 경우, 프록시를 `Aspect`로 구현하면 된다.

TDD의 시작은 일을 하지 않는 프록시로 시작해야 한다. 너무 많은 일을 부여하고 시작해버리면 내부를 볼 수 없는 테스트 상 추적이 까다로워진다.

## 실제 사용하는 프록시 패턴의 종류
| 이름 | 설명 |
|:---:|:--- |
| 원격 프록시 | 원격 객체에 대한 접근 제어가 가능하다. |
| 가상 프록시 <br/> (Virtual Proxy) | 객체의 생성비용이 많이 들어 미리 생성하기 힘든 객체에 대한 접근 및 생성시점 등을 제어한다. |
| 보호 프록시 <br/> (Protection Proxy) | 접근이 제한되어야 하는 객체에 대해 접근을 하지 못하도 제어한다. |
| 방화벽 프록시 | 일련의 네트워크 자원에 대한 접근을 제어함으로써 주 객체를 '나쁜' 클라이언트들로부터 보호한다. | 
| 스마트 레퍼런스 프록시 <br/>(Smart Reference Proxy) | 주 객체가 참조될 때마다 추가 행동을 제공한다. ex) 객체 참조에 대한 선 작업, 후 작업 등 |
| 캐싱 프록시 <br/>(Caching Proxy) | 비용이 많이 드는 작업의 결과를 임시로 저장 하고, 추후 여러 클라이언트에 저장된 결과를 실제 작업처리 대신 보여주고 자원을 절약한다. |
| 동기화 프록시 <br/>(Synchronization Proxy) | 여러 스레드에서 주 객체에 접근하는 경우에 안전하게 작업을 처리할 수 있게 해준다. 주로 분산 환경에서 일련의 객체에 대한 동기화 된 접근을 제어해주는 자바 스페이스에서 쓰인다. |
| 복잡도 숨김 프록시 (Complexity Hiding Proxy) | 복잡한 클래스들의 집합에 대한 접근을 제어하고, 복잡도를 숨긴다.  |
| 지연 복사 프록시 <br/>(Copy-On-Write Proxy) | 클라이언트에서 필요로 할 때까지 객체가 복사되는 것을 지연시킴으로써 객체의 복사를 제어한다. |


# 출처

[프록시 패턴의 종류](https://developside.tistory.com/80)는 왼쪽 링크에서 가져왔다.